<div id="usuario-detalle-content" class="container mt-4 mb-5">
    
    <div class="row justify-content-center">

        <div class="d-flex justify-content-end mb-3">
            <% if (typeof lista !== 'undefined' && lista) { %>
                <a href="/usuarios" class="btn btn-outline-secondary">
                    <span lang="es" class="lang lang-es">Volver a la lista</span>
                    <span lang="en" class="lang lang-en d-none">Back to List</span>
                </a>
            <% } else { %>
                <a href="/" class="btn btn-outline-secondary">
                    <span lang="es" class="lang lang-es">Volver al inicio</span>
                    <span lang="en" class="lang lang-en d-none">Back to Home</span>
                </a>
            <% } %>
        </div>

        <div class="col-lg-8">

            <div id="alertasPerfil"></div>

            <div class="perfil-card">
                
                <div class="perfil-card-header text-center">
                    <h2 class="perfil-title"><%= title %></h2>
                </div>

                <div class="perfil-card-body text-center">
                    <div class="perfil-avatar mb-3">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-person-square" viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                            <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z" />
                        </svg>
                    </div>
                    
                    <h4 class="perfil-nombre mb-1"><%= usuario.nombre %></h4>
                    
                    <div class="mb-3">
                        <small class="perfil-rol text-muted">
                            <% if (usuario.rol === 'Empleado') { %>
                                <span class="badge" style="background-color: var(--color-primary-hover); color: white;">Empleado</span>
                            <% } else { %>
                                <span class="badge" style="background-color: var(--color-nav); color: white;">Administrador</span>
                            <% } %>
                        </small>

                        <small class="perfil-activo text-muted">
                            <% if (usuario.activo === 1) { %>
                                <span id="badgeActivo" class="badge bg-success">Activo</span>
                            <% } else { %>
                                <span id="badgeActivo" class="badge bg-danger">Eliminado</span>
                            <% } %>
                        </small>
                    </div>
                </div>

                <div class="perfil-info px-4 py-3">
                    
                    <div class="row mb-2">
                        <div class="col-sm-4 label fw-bold">Email:</div>
                        <div class="col-sm-8 value"><%= usuario.correo %></div>
                    </div>

                    <div class="row mb-2">
                        <div class="col-sm-4 label fw-bold">Teléfono:</div>
                        <div class="col-sm-8 value"><%= usuario.telefono%></div>
                    </div>

                    <div class="row mb-2">
                        <div class="col-sm-4 label fw-bold">Concesionario:</div>
                        <div class="col-sm-8 value"><%= usuario.nombre_concesionario || '──────────────' %></div>
                    </div>

                    <% if (usuario.preferencias_accesibilidad) { %>
                    <div class="row mb-2">
                        <div class="col-sm-4 label text-end fw-bold">Accesibilidad:</div>
                        <div class="col-sm-8 value" style="white-space: pre-wrap;"><%= usuario.preferencias_accesibilidad %></div>
                    </div>
                    <% } %>

                </div>

                <% if (usuario.activo === 1) { %>
                    <div id="accionesUsuario" class="perfil-actions d-flex justify-content-center gap-2 pb-4">
                        
                        <% if (usuarioSesion && usuarioSesion.rol === 'Admin' && usuarioSesion.id_usuario !== usuario.id_usuario) { %>
                            <button type="button"
                                    class="btn btn-outline-secondary"
                                    data-bs-toggle="modal"
                                    data-bs-target="#modalEliminarUsuario"
                                    data-id="<%= usuario.id_usuario %>"
                                    data-name="<%= usuario.nombre %>">
                                Eliminar
                            </button>
                        <% } %>

                        <% if ((usuarioSesion.rol === 'Admin') || (usuarioSesion.id_usuario === usuario.id_usuario)) { %>
                            <a href="/usuarios/<%= usuario.id_usuario %>/editar" class="btn btn-primary">
                                <span lang="es" class="lang lang-es">Editar Información</span>
                                <span lang="en" class="lang lang-en d-none">Edit Info</span>
                            </a>
                        <% } %>

                    </div>
                <% } %>

            </div> </div> </div> </div> <div class="modal fade" id="modalEliminarUsuario" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="modalTituloUsuario">Eliminar usuario</h5>
        <button class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        ¿Seguro que quieres eliminar al usuario <span id="nombreUsuarioAEliminar" class="fw-bold">este usuario</span>?

        <div class="d-flex justify-content-end mt-3 gap-2">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" id="btnConfirmarEliminarUsuario" class="btn btn-primary">Eliminar</button>
        </div>
      </div>

    </div>
  </div>
</div>

<script src="/js/jquery.min.js"></script>
<script src="/js/jquery-ui.min.js"></script>
<script src="/js/jquery-3.7.1.min.js"></script>
<script src="/js/ajax/usuarios/usuarioDetalle.js"></script>