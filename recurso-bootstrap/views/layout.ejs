<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GestiFleet</title>
    <link rel="icon" type="image/png" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" href="/css/style.css"> -->
    <!-- AS√ç DEBE QUEDAR -->
    <link rel="stylesheet" href="/css/theme.css">
    <link rel="stylesheet" href="/css/base.css">
    <link rel="stylesheet" href="/css/layout.css">
    <link rel="stylesheet" href="/css/forms.css">
    <link rel="stylesheet" href="/css/components.css">
    <link rel="stylesheet" href="/css/validation.css">
    <link rel="stylesheet" href="/css/errores.css"> 
    <link rel="stylesheet" href="/css/responsive.css">
</head>
<body>
    <div class="d-flex flex-column min-vh-100">

        <div class="header-nav">

            <header class="d-flex align-items-center">
                <a href="/">
                    <img class="me-3" src="/img/logo.png" alt="Logo de la empresa" id="logo" width="80">
                </a>
                <h1>GestiFleet</h1>
            </header>

            <nav class="navbar navbar-expand-lg nav-underline custom-navbar">
                <div class="container-fluid">
                <!-- <a class="navbar-brand d-flex align-items-center" href="/">
                    <img src="../public/img/logo-blanco.png" alt="Logo de la empresa" width="60" class="me-2">
                </a> -->

                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="nav nav-underline me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a href="/" class="nav-link" aria-current="page">
                            <span lang="es" class="lang lang-es">Inicio</span>
                            <span lang="en" class="lang lang-en d-none">Home</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/vehiculos" class="nav-link">
                            <span lang="es" class="lang lang-es">Veh√≠culos</span>
                            <span lang="en" class="lang lang-en d-none">Vehicles</span>
                            </a>
                        </li>
                        <% if (usuario) { %>
                            <li class="nav-item">
                                <a href="/reserva" class="nav-link">
                                    <span lang="es" class="lang lang-es">Reservar</span>
                                    <span lang="en" class="lang lang-en d-none">Book</span>
                                </a>
                            </li>
                            <% if (usuario.rol === 'Admin') { %>
                                <li class="nav-item">
                                    <a href="/reserva/listareservas" class="nav-link">
                                        <span lang="es" class="lang lang-es">Ver Todas las Reservas</span>
                                        <span lang="en" class="lang lang-en d-none">View All Bookings</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="/concesionarios/nuevo" class="nav-link">
                                        <span lang="es" class="lang lang-es">A√±adir Concesionario</span>
                                        <span lang="en" class="lang lang-en d-none">Add Car Dealer</span>
                                    </a>
                                </li>
                            <% } else { %>
                                <li class="nav-item">
                                    <a href="/reserva/mis-reservas" class="nav-link">
                                        <span lang="es" class="lang lang-es">Mis Reservas</span>
                                        <span lang="en" class="lang lang-en d-none">My Bookings</span>
                                    </a>
                                </li>
                            <% } %>
                            <li class="nav-item">
                                <a href="/concesionarios" class="nav-link">
                                    <span lang="es" class="lang lang-es">Ver Todos los Concesionarios</span>
                                    <span lang="en" class="lang lang-en d-none">View All Car Dealers</span>
                                </a>
                            </li>
                        <% } %>
                    </ul>

                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="accesibilidadDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
                                <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                            </svg>
                            <span lang="es" class="lang lang-es desplegable ms-1">Ajustes</span>
                            <span lang="en" class="lang lang-en d-none desplegable ms-1">Settings</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="accesibilidadDropdown">
                            
                            <li><h6 class="dropdown-header">
                                <span lang="es" class="lang lang-es">Tema</span>
                                <span lang="en" class="lang lang-en d-none">Theme</span>
                            </h6></li>
                            <li><a class="dropdown-item tema-opcion" href="#" data-value="normal">
                                <span lang="es" class="lang lang-es">Predeterminado</span>
                                <span lang="en" class="lang lang-en d-none">Default</span>
                            </a></li>
                            <li><a class="dropdown-item tema-opcion" href="#" data-value="high">
                                <span lang="es" class="lang lang-es">Oscuro</span>
                                <span lang="en" class="lang lang-en d-none">Dark</span>
                            </a></li>
                            
                            <li><hr class="dropdown-divider"></li>
                            
                            <li><h6 class="dropdown-header">
                                <span lang="es" class="lang lang-es">Idioma</span>
                                <span lang="en" class="lang lang-en d-none">Language</span>
                            </h6></li>
                            <li>
                                <a class="dropdown-item" href="#" onclick="setLanguage('es')">
                                    <span lang="es" class="lang lang-es">Espa√±ol</span>
                                    <span lang="en" class="lang lang-en d-none">Spanish</span>
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#" onclick="setLanguage('en')">
                                    <span lang="es" class="lang lang-es">Ingl√©s</span>
                                    <span lang="en" class="lang lang-en d-none">English</span>
                                </a>
                            </li>
                            
                            <li><hr class="dropdown-divider"></li>

                            <li><h6 class="dropdown-header">
                                <span lang="es" class="lang lang-es">Tama√±o de Letra</span>
                                <span lang="en" class="lang lang-en d-none">Font Size</span>
                            </h6></li>
                            <li><a class="dropdown-item tamanyo-opcion" href="#" data-size="80">
                                <span lang="es" class="lang lang-es">Peque√±o (80%)</span>
                                <span lang="en" class="lang lang-en d-none">Small (80%)</span>
                            </a></li>
                            <li><a class="dropdown-item tamanyo-opcion" href="#" data-size="100">
                                <span lang="es" class="lang lang-es">Normal (100%)</span>
                                <span lang="en" class="lang lang-en d-none">Normal (100%)</span>
                            </a></li>
                            <li><a class="dropdown-item tamanyo-opcion" href="#" data-size="120">
                                <span lang="es" class="lang lang-es">Grande (120%)</span>
                                <span lang="en" class="lang lang-en d-none">Large (120%)</span>
                            </a></li>
                        </ul>
                    </div>

                    <!-- <a href="/login" class="nav-link" aria-current="page">
                        <span lang="es" class="lang lang-es">Identif√≠cate</span>
                        <span lang="en" class="lang lang-en d-none">Login</span>
                    </a> -->
                    <% if (!usuario) { %>
                        <a href="/login" class="nav-link" aria-current="page">Identif√≠cate</a>
                      <% } else { %>
                        <div class="dropdown">
                            <a href="#" class="dropdown-toggle nav-link" id="perfilDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                                    <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                                  </svg>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="perfilDropdown">
                              <li><a class="dropdown-item" href="/perfil">Mi informaci√≥n</a></li>
                              <li><hr class="dropdown-divider"></li>
                              <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">Cerrar sesi√≥n</a></li>
                            </ul>
                          </div>
                      <% } %>
                </div>
                </div>
            </nav>

        </div>

        <main id="app-main" class="flex-grow-1">
            <div class="container py-4">
                <%- body %>
            </div>
        </main>

        <!-- <footer>
            <p lang="es" class="lang lang-es">Precios desde 30.000 &euro; &nbsp; | &copy; 2025 </p>
            <p lang="en" class="lang lang-en d-none">Prices from ‚Ç¨30,000 &nbsp; | &copy; 2025</p>
        </footer> -->
        <footer class="mt-5">
            <div class="container py-4">
              <div class="row gy-3">
                <div class="col-md-4 text-md-start text-center">
                  <h5 class="fw-bold">GestiFleet</h5>
                  <p style="max-width: 320px;">
                    Soluciones inteligentes para la gesti√≥n de flotas empresariales.
                  </p>
                </div>
                <div class="col-md-4 text-md-center">
                  <h6 class="fw-bold">Enlaces √∫tiles</h6>
                  <ul class="list-unstyled">
                    <li><a href="/" class="text-decoration-none">Inicio</a></li>
                    <li><a href="/contacto" class="text-decoration-none">Contacto</a></li>
                    <li><a href="/contacto" class="text-decoration-none">Accesibilidad</a></li>
                  </ul>
                </div>
                <div class="col-md-4 text-md-end">
                  <h6 class="fw-bold">Cont√°ctanos</h6>
                  <p class="mb-1"><i class="bi bi-envelope"></i> contacto@gestifleet.com</p>
                  <p><i class="bi bi-geo-alt"></i> Madrid, Espa√±a</p>
                </div>
              </div>
          
              <hr class="my-4" style="border-color: var(--color-field-border);">
          
              <div class="text-center small">
                ¬© 2025 <strong>GestiFleet</strong> ‚Äî Movemos el futuro de la movilidad empresarial üöóüí°
              </div>
            </div>
        </footer>
        
         <!-- MODAL LOGOUT -->
         <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="logoutModalLabel">Cerrar sesi√≥n</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                  <div class="modal-body">
                  ¬øEst√°s seguro de que quieres cerrar sesi√≥n?
                  <br>
                  <div class="d-flex justify-content-end mt-3 gap-2">
                      <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                      <a href="/logout" class="btn btn btn-primary">Cerrar sesi√≥n</a>
                  </div>
                </div>
              </div>
            </div>
        </div>

    </div>  
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/ajustes.js"></script>
</body>
</html>