<div class="reservas-content">
  <h1><%= title %></h1>
  
  <% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert-danger" role="alert" aria-live="assertive">
      <%= error %>
    </div>
  <% } %>

  <div id="formProgressContainer">
    <label for="formProgress" lang="es" class="lang lang-es">Progreso del formulario:</label>
    <label for="formProgress" lang="en" class="lang lang-en">Form progress:</label>
    <progress id="formProgress" value="0" max="100"></progress>
    <span id="progressPercent">0%</span>
  </div>

  <form id="revistaForm" lang="es" class="lang lang-es" autocomplete="off" action="/reserva" method="POST" novalidate>
    <!-- <fieldset>
        <legend class="w-auto">Reserva tu vehículo</legend>
        <br>
        <div class="row name">
          <div class="col-md-4 campo-nombre">
            <label for="nombre" class="form-label obligatorio">Nombre: </label>
            <input type="text" id="nombre" name="nombre" class="form-control" aria-describedby="error-nombre" required> 
            <span class="error" id="error-nombre" aria-live="polite"></span>
          </div>
          <div class="col-md-4 campo-apellido1">
            <label for="apellido1" class="form-label obligatorio">Primer apellido: </label>
            <input type="text" id="apellido1" name="apellido1" class="form-control" aria-describedby="error-apellido1" required>
            <span class="error" id="error-apellido1" aria-live="polite"></span>
          </div>
          <div class="col-md-4 campo-apellido2">
            <label for="apellido2" class="form-label NoObligatorio">Segundo apellido: </label>
            <input type="text" id="apellido2" name="apellido2" class="form-control" aria-describedby="error-apellido2">
            <span class="error" id="error-apellido2" aria-live="polite"></span>
          </div>
        </div>
        <div class="row mailContrasenya">
          <div class="col-md-6 campo-email">
            <label for="email" class="form-label obligatorio">E-mail: </label>
            <input type="email" id="email" name="email" class="form-control" placeholder="tunombre@correo.com" required>
            <span class="error" id="error-email" aria-live="polite"></span>
          </div>
          <div class="col-md-6 campo-contrasenya">
            <label for="contrasenya" class="form-label obligatorio">Contraseña: </label>
            <input type="password" id="contrasenya" name="contrasenya" class="form-control" required>
            <span class="error" id="error-contrasenya" aria-live="polite"></span>
            <div class="mostrar-contrasenya" style="margin-top:6px; display:flex; align-items:center; gap:8px;">
              <input type="checkbox" id="mostrarContrasenya" aria-controls="contrasenya" />
              <label for="mostrarContrasenya" style="cursor:pointer; user-select:none;">Mostrar contraseña</label>
            </div>
          </div>
        </div>
    </fieldset> -->
    <fieldset>
        <legend class="w-auto">Detalles de la reserva</legend>
        <br>
        
        <div class ="col-md-4">
          <label for="vehiculo" class="form-label obligatorio">Selecciona el vehículo: </label><br>
          <select id="vehiculo" name="vehiculo" class="form-select" required>
              <option value="">Seleccione un vehículo</option>
              <% if (vehiculos && vehiculos.length > 0) { %>
                <% vehiculos.forEach(v => { %>
                  <option 
                    value="<%= v.id_vehiculo %>" 
                    <%= idVehiculoSeleccionado == v.id_vehiculo ? 'selected' : '' %>>
                    <%= v.marca %> <%= v.modelo %>
                  </option>
                <% }) %>
              <% } %>
          </select>
          <span class="error" id="error-vehiculo" aria-live="polite"></span>
        </div>

        <div class="row fecha-reserva">
          <div class="col-md-6 campo-fecha-inicio">
            <label for="fechaInicio" class="form-label obligatorio">Inicio de la reserva: </label>
            <input type="datetime-local" id="fechaInicio" name="fechaInicio" class="form-control" required>
            <span class="error" id="error-fecha-inicio" aria-live="polite"></span>
          </div>
          <div class="col-md-6 campo-fecha-fin">
            <label for="fechaFin" class="form-label obligatorio">Fin de la reserva: </label>
            <input type="datetime-local" id="fechaFin" name="fechaFin" class="form-control" required>
            <span class="error" id="error-fecha-fin" aria-live="polite"></span>
          </div>
        </div>

        <div class="campo-condiciones mt-3">
          <input type="checkbox" id="condiciones" name="condiciones" required>
          <label for="condiciones" class="form-label obligatorio">Acepto los términos y condiciones</label>
          <span class="error" id="error-condiciones" aria-live="polite"></span>
        </div>
    </fieldset>
    <div class="d-flex justify-content-end mt-3 gap-2">
      <button type="reset" class="btn btn-outline-secondary">Borrar formulario</button>
      <button type="submit" class="btn btn-primary">Enviar</button>
    </div>
  </form>

  <form id="revistaFormEn" lang="en" autocomplete="off" class="lang lang-en d-none" action="/reserva" method="POST" novalidate>
    <fieldset>
        <legend class="w-auto">Book your vehicle</legend>
        <br>
        <div class="row name">
            <div class="col-md-4 campo-nombre">
                <label for="nombre_en" class="form-label obligatorio">Name: </label>
                <input type="text" id="nombre_en" name="nombre" class="form-control" aria-describedby="error-nombre_en" required>
                <span class="error" id="error-nombre_en" aria-live="polite"></span>
            </div>
            <div class="col-md-4 campo-apellido1">
                <label for="apellido1_en" class="form-label obligatorio">First surname: </label>
                <input type="text" id="apellido1_en" name="apellido1" class="form-control" aria-describedby="error-apellido1_en" required>
                <span class="error" id="error-apellido1_en" aria-live="polite"></span>
            </div>
            <div class="col-md-4 campo-apellido2">
                <label for="apellido2_en" class="form-label NoObligatorio">Second surname: </label>
                <input type="text" id="apellido2_en" name="apellido2" class="form-control" aria-describedby="error-apellido2_en">
                <span class="error" id="error-apellido2_en" aria-live="polite"></span>
            </div>
        </div>
        <div class="row mailContrasenya">
            <div class="col-md-6 campo-email">
                <label for="email_en" class="form-label obligatorio">E-mail: </label>
                <input type="email" id="email_en" name="email" class="form-control" placeholder="yourname@mail.com" required>
                <span class="error" id="error-email_en" aria-live="polite"></span>
            </div>
            <div class="col-md-6 campo-contrasenya">
                <label for="contrasenya_en" class="form-label obligatorio">Password: </label>
                <input type="password" id="contrasenya_en" name="contrasenya" class="form-control" required>
                <span class="error" id="error-contrasenya_en" aria-live="polite"></span>
            </div>
        </div>
    </fieldset>

    <fieldset>
        <legend class="w-auto">Reservation details</legend>
        <br>
        <div class="col-md-4">
            <label for="vehiculo_en" class="form-label obligatorio">Select the vehicle: </label><br>
            <select id="vehiculo_en" name="vehiculo" class="form-select" required>
                <option value="">Select the vehicle</option>
                <option value="coche">Car</option>
                <option value="moto">Motorbike</option>
                <option value="patinete">Scooter</option>
            </select>
            <span class="error" id="error-vehiculo_en" aria-live="polite"></span>
        </div>

        <div class="row fecha-reserva">
            <div class="col-md-6 campo-fecha-inicio"> <label for="fechaInicio_en" class="form-label obligatorio">Start of reservation: </label>
                <input type="datetime-local" id="fechaInicio_en" name="fechaInicio" class="form-control" required>
                <span class="error" id="error-fecha-inicio_en" aria-live="polite"></span>
            </div>
            <div class="col-md-6 campo-fecha-fin"> <label for="fechaFin_en" class="form-label obligatorio">End of reservation: </label>
                <input type="datetime-local" id="fechaFin_en" name="fechaFin" class="form-control" required>
                <span class="error" id="error-fecha-fin_en" aria-live="polite"></span>
            </div>
        </div>

        <div class="campo-condiciones mt-3">
            <input type="checkbox" id="condiciones_en" name="condiciones" required>
            <label for="condiciones_en" class="form-label obligatorio">I agree to the terms and conditions</label>
            <span class="error" id="error-condiciones_en" aria-live="polite"></span>
        </div>
    </fieldset>
    <div class="d-flex justify-content-end mt-3 gap-2">
      <button type="reset" class="btn btn-outline-secondary">Clear form</button>
      <button type="submit" class="btn btn-primary">Submit</button>
    </div>
  </form>
</div>
<script src="/js/formulario.js"></script>