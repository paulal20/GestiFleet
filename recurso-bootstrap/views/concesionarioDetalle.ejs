<div class="concesionario-detalle-content">
  
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1><%= concesionario.nombre %></h1>
    <a href="/concesionarios" class="btn btn-outline-secondary">Volver al listado</a>
  </div>

  <div class="vehiculo-card card mb-4">
    
    <!-- Encabezado de la tarjeta -->
    <div class="card-header">
      <h5 class="mb-0 fw-bold">Información de Contacto</h5>
    </div>
    
    <!-- Cuerpo de la tarjeta -->
    <div class="card-body">
      <!-- Reemplazamos la lista 'ul' por el sistema 'row/col' -->
      <div class="row mb-2">
        <div class="col-sm-3 fw-bold">Ciudad:</div>
        <div class="col-sm-9"><%= concesionario.ciudad %></div>
      </div>
      <div class="row mb-2">
        <div class="col-sm-3 fw-bold">Dirección:</div>
        <div class="col-sm-9"><%= concesionario.direccion %></div>
      </div>
      <div class="row mb-2">
        <div class="col-sm-3 fw-bold">Teléfono:</div>
        <div class="col-sm-9"><%= concesionario.telefono_contacto %></div>
      </div>
    </div>
    
    <!-- Acciones de Admin (Usando la clase 'perfil-actions') -->
    <% if (usuario && usuario.rol === 'Admin') { %>
      <div class="perfil-actions d-flex justify-content-end gap-2">
        <a href="/concesionarios/<%= concesionario.id_concesionario %>/editar" class="btn btn-secondary">
          Editar
        </a>
        <form action="/concesionarios/<%= concesionario.id_concesionario %>/eliminar" method="POST" onsubmit="return confirm('¿Estás seguro de que quieres eliminar este concesionario? Esta acción no se puede deshacer.');">
          <button type="submit" class="btn btn-danger">
            Eliminar
          </button>
        </form>
      </div>
    <% } %>
  </div>

  <!-- Lista de Vehículos Asociados -->
  <h2>Vehículos en esta base</h2>
  <% if (vehiculos && vehiculos.length > 0) { %>
    <div class="table-responsive-md">
      <table class="table table-hover">
        <thead class="table-light">
          <tr>
            <th scope="col">Matrícula</th>
            <th scope="col">Marca</th>
            <th scope="col">Modelo</th>
            <th scope="col">Estado</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% vehiculos.forEach(v => { %>
            <tr>
              <td><%= v.matricula %></td>
              <td><%= v.marca %></td>
              <td><%= v.modelo %></td>
              <td>
                <% if (v.estado === 'disponible') { %>
                  <span class="badge bg-success">Disponible</span>
                <% } else if (v.estado === 'reservado') { %>
                  <span class="badge bg-warning text-dark">Reservado</span>
                <% } else if (v.estado === 'mantenimiento') { %>
                  <span class="badge bg-secondary">Mantenimiento</span>
                <% } else { %>
                  <span class="badge bg-light text-dark"><%= v.estado %></span>
                <% } %>
              </td>
              <td>
                <a href="/vehiculos/<%= v.id_vehiculo %>" class="btn btn-primary btn-sm">
                  Ver Vehículo
                </a>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } else { %>
    <div class="alert alert-info" role="alert">
      Actualmente no hay vehículos asignados a este concesionario.
    </div>
  <% } %>

</div>