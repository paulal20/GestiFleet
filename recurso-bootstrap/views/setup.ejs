<div class="setup-content setup-container container mb-5 mt-4">
    
    <div class="text-center mb-4">
        <h2 class="display-6 fw-bold text-dark">
            <img src="/bootstrap-icons-1.13.1/database-fill-gear.svg" class="bi-svg" alt="" style="width: 40px; height: 40px;">
            Carga Inicial
        </h2>
        <p class="text-muted">Configuración secuencial de la base de datos.</p>
    </div>

    <div id="setupAlertContainer" class="mb-4"></div>

    <div class="row g-4">
        
        <div class="col-md-4">
            <div class="perfil-card setup-card h-100" id="card-step1">
                <div class="perfil-card-header text-center text-white" style="background-color: var(--color-primary-hover);">
                    <h5 class="perfil-title mb-0 text-white">
                        <img src="/bootstrap-icons-1.13.1/building.svg" class="bi-svg" alt="" style="filter: invert(1); width: 20px; height: 20px;">
                         1. Concesionarios
                    </h5>
                </div>
                <div class="perfil-card-body text-center d-flex flex-column h-100 p-4">
                    <p class="mb-3 text-muted small">Carga el JSON con los concesionarios.</p>
                    
                    <div class="mb-3 text-start">
                        <label for="fileConcesionarios" class="form-label fw-bold small">Selecciona archivo:</label>
                        <input class="form-control" type="file" id="fileConcesionarios" accept=".json">
                    </div>

                    <div class="perfil-actions d-grid">
                        <button id="btnStep1" class="btn btn-primary shadow-sm">
                            <img src="/bootstrap-icons-1.13.1/cloud-upload-fill.svg" class="bi-svg me-2" alt="" style=" width: 20px; height: 20px;">
                            Cargar
                        </button>
                        
                        <div class="mt-3 d-none" id="status-step1">
                            <span class="badge bg-success w-100 py-2"><img src="/bootstrap-icons-1.13.1/check-lg.svg" class="bi-svg" alt="" style="filter: invert(1); width: 20px; height: 20px;"> Completado</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="perfil-card setup-card h-100" id="card-step2" style="opacity: 0.6; pointer-events: none;">
                <div class="perfil-card-header text-center text-white" id="header-step2" style="background-color: var(--color-primary-hover);">
                    <h5 class="perfil-title mb-0 text-white">
                        <img src="/bootstrap-icons-1.13.1/car-front-fill.svg" class="bi-svg" alt="" style="filter: invert(1); width: 20px; height: 20px;"> 2. Vehículos
                    </h5>
                </div>
                <div class="perfil-card-body text-center d-flex flex-column h-100 p-4">
                    <p class="mb-3 text-muted small">Requiere concesionarios activos.</p>
                    
                    <div class="mb-3 text-start">
                        <label for="fileVehiculos" class="form-label fw-bold small">Selecciona archivo:</label>
                        <input class="form-control" type="file" id="fileVehiculos" accept=".json" disabled>
                    </div>

                    <div class="perfil-actions d-grid">
                        <button id="btnStep2" class="btn btn-secondary shadow-sm" disabled>
                            <img src="/bootstrap-icons-1.13.1/cloud-upload-fill.svg" class="bi-svg me-2" alt="" style=" width: 20px; height: 20px;"> Cargar
                        </button>

                        <div class="mt-3 d-none" id="status-step2">
                            <span class="badge bg-success w-100 py-2"><img src="/bootstrap-icons-1.13.1/check-lg.svg" class="bi-svg" alt="" style="filter: invert(1); width: 20px; height: 20px;"> Completado</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="perfil-card setup-card h-100" id="card-step3" style="opacity: 0.6; pointer-events: none;">
                <div class="perfil-card-header text-center text-white" id="header-step3" style="background-color: var(--color-primary-hover);">
                    <h5 class="perfil-title mb-0 text-white">
                        <img src="/bootstrap-icons-1.13.1/people-fill.svg" class="bi-svg" alt="" style="filter: invert(1); width: 20px; height: 20px;"> 3. Usuarios <small class="fw-light">(Opcional)</small>
                    </h5>
                </div>
                <div class="perfil-card-body text-center d-flex flex-column h-100 p-4">
                    <p class="mb-3 text-muted small">Carga empleados (Requiere vehículos).</p>
                    
                    <div class="mb-3 text-start">
                        <label for="fileUsuarios" class="form-label fw-bold small">Selecciona archivo:</label>
                        <input class="form-control" type="file" id="fileUsuarios" accept=".json" disabled>
                    </div>

                    <div class="perfil-actions d-grid">
                        <button id="btnStep3" class="btn btn-secondary shadow-sm" disabled>
                            <img src="/bootstrap-icons-1.13.1/cloud-upload-fill.svg" class="bi-svg me-2" alt="" style=" width: 20px; height: 20px;"> Cargar
                        </button>

                        <div class="mt-3 d-none" id="status-step3">
                            <span class="badge bg-success w-100 py-2"><img src="/bootstrap-icons-1.13.1/check-lg.svg" class="bi-svg" alt="" style="filter: invert(1); width: 20px; height: 20px;"> Completado</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-md-6 mx-auto">
            <div class="d-grid">
                <a href="/" class="btn btn-success btn-lg shadow-sm disabled" id="btnFinish">
                    Finalizar Instalación e Ir al Inicio
                </a>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalResumen" tabindex="-1" aria-hidden="true" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><img src="/bootstrap-icons-1.13.1/clipboard-data.svg" class="bi-svg" alt="" style="width: 20px; height: 20px;"> Resumen de Importación</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center p-4">
                <div class="row mb-3">
                    <div class="col-6 border-end">
                        <h1 class="text-success fw-bold display-4" id="modalSuccessCount">0</h1>
                        <p class="text-muted fw-bold">Insertados</p>
                    </div>
                    <div class="col-6">
                        <h1 class="text-danger fw-bold display-4" id="modalFailCount">0</h1>
                        <p class="text-muted fw-bold">Fallidos / Duplicados</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary w-100" data-bs-dismiss="modal">Aceptar y Continuar</button>
            </div>
        </div>
    </div>
</div>

<script src="/js/jquery-3.7.1.min.js"></script>
<script src="/js/cargar.js"></script>