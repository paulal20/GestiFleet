<div class="vehiculo-detalle-content">
  <div class="d-flex justify-content-end">
    <a href="/vehiculos" class="btn btn-outline-secondary">Volver a la lista</a>
  </div>
  <div class="vehiculo-card card mx-auto" style="max-width: 900px;">
    <div class="row g-0">

      <div class="col-md-6">
        <div class="vehiculo-img-container h-100">
          <img src="/vehiculos/<%= vehiculo.id_vehiculo %>/imagen" class="rounded-start img-cover"
            alt="<%= vehiculo.marca %>">
        </div>
      </div>

      <div class="col-md-6 d-flex flex-column">

        <div class="card-body flex-grow-1">
          <h5 class="card-title">
            <%= vehiculo.marca %>
            <%= vehiculo.modelo %> (<%= vehiculo.anyo_matriculacion %>), Matricula: <%= vehiculo.matricula %>
          </h5>
          <p class="card-text"> <%= vehiculo.descripcion %> </p>
          <div class="row">
            <div class="col-6">
              <p class="card-text"><strong>Tipo: </strong><%= vehiculo.tipo %></p>
            </div>
            <div class="col-6">
              <p class="card-text"><strong>Número de plazas: </strong><%= vehiculo.numero_plazas %></p>
            </div>
            <div class="col-6">
              <p class="card-text"><strong>Autonomía: </strong><%= vehiculo.autonomia_km %></p>
            </div>
            <div class="col-6">
              <p class="card-text"><strong>Color: </strong><%= vehiculo.color %></p>
            </div>
            <div class="col-6">
              <p class="card-text">
                <strong>Estado:</strong>
                <% if (vehiculo.estado==='disponible' ) { %>
                <span class="badge bg-success">Disponible</span>
                <% } else if (vehiculo.estado==='reservado' ) { %>
                <span class="badge bg-warning text-dark">Reservado</span>
                <% } else { %>
                <span class="badge bg-danger">Mantenimiento</span>
                <% } %>
              </p>
            </div>
            <div class="col-6">
              <p class="card-text"><strong>Concesionario:</strong> <%= concesionario.nombre %></p>
            </div>
          </div>
          <br>
          <p class="text-muted">Desde <%= vehiculo.precio %> €</p>
        </div>

        <div class="perfil-actions d-flex gap-2 mt-3">

          <a href="/reserva?idVehiculo=<%= vehiculo.id_vehiculo %>" class="btn btn-primary flex-fill">Reservar</a>
          <% if (usuarioSesion && usuarioSesion.rol === 'Admin') { %>
            <button type="button"
                    class="btn btn-outline-secondary flex-fill"
                    data-bs-toggle="modal"
                    data-bs-target="#confirmarEliminarModal"
                    data-id="<%= vehiculo.id_vehiculo %>"
                    data-name="<%= vehiculo.marca + ' ' + vehiculo.modelo %>">
              Eliminar
            </button>
            <a href="/vehiculos/<%= vehiculo.id_vehiculo %>/editar" class="btn btn-primary flex-fill">
              Editar
            </a>
            <% } %>
        </div>

        
      </div> 
    </div> 
  </div> 
</div>

<div class="modal fade" id="confirmarEliminarModal" tabindex="-1" aria-labelledby="confirmarEliminarModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmarEliminarModalLabel">Eliminar Vehículo</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        ¿Estás seguro de que quieres eliminar <span id="vehiculoAEliminar"></span>?
        <br>
        <div class="d-flex justify-content-end mt-3 gap-2">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
          <form id="formEliminar" action="" method="POST" class="m-0 p-0">
            <button type="submit" class="btn btn-primary">Eliminar</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="/js/modal.js"></script>