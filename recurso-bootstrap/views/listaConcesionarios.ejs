<div class="listaconcesionarios-content">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1><%= title %></h1>
    <% if (usuarioSesion && usuarioSesion.rol === 'Admin') { %>
      <a href="/concesionarios/nuevo" class="btn btn-primary btn-lg">
        <span class="lang lang-es">Nuevo Concesionario</span>
        <span class="lang lang-en d-none">New Dealership</span>
      </a>
    <% } %>
  </div>

  <!-- FILTRO -->
  <div class="mb-4">
    <fieldset>
      <legend class="w-auto">Filtros</legend>
      <div class="row g-3">
        <div class="col-md-6 col-lg-4">
          <label for="filtroCiudad" class="form-label">Ciudad</label>
          <select id="filtroCiudad" class="form-select">
            <option value="">Todas las Ciudades</option>
            <!-- Opciones se llenan con JS -->
          </select>
        </div>

        <div class="col-md-6 col-lg-4 d-flex align-items-end gap-2">
          <button type="button" id="btnFiltrar" class="btn btn-primary w-100">Filtrar</button>
          <button type="button" id="btnLimpiar" class="btn btn-outline-secondary w-100">Limpiar</button>
        </div>
      </div>
    </fieldset>
  </div>

  <!-- ALERTAS -->
  <div id="alertas"></div>

  <!-- TABLA -->
  <div class="table-responsive-md">
    <table class="table table-hover" aria-describedby="tabla-concesionarios-descripcion">
      <caption class="text-center">
        Concesionarios mostrados: <strong id="contadorConcesionarios">0</strong>
      </caption>
      <thead class="table-dark">
        <tr>
          <th scope="col">Nombre</th>
          <th scope="col">Ciudad</th>
          <th scope="col">Dirección</th>
          <th scope="col">Teléfono</th>
          <th scope="col">Activo</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody id="tablaConcesionariosBody">
        <!-- AJAX insertará filas aquí -->
      </tbody>
    </table>
  </div>
  <div id="tabla-concesionarios-descripcion" class="visually-hidden">
    Listado de concesionarios. Al hacer clic en una fila, se navega a su detalle.
  </div>

</div>

<!-- MODAL ELIMINAR -->
<div class="modal fade" id="confirmarEliminarConcesionarioModal" tabindex="-1" aria-labelledby="confirmarEliminarConcesionarioModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title" id="confirmarEliminarConcesionarioModalLabel">Eliminar Concesionario</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>

      <div class="modal-body">
        <p id="textoConfirmacionConcesionario">
          ¿Estás seguro de que deseas eliminar este concesionario?
        </p>

        <div class="d-flex justify-content-end mt-3 gap-2">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>

          <form id="formEliminarConcesionario" action="" method="POST" class="m-0 p-0">
            <button type="submit" class="btn btn-primary">Eliminar</button>
          </form>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- SCRIPTS -->
<script src="/js/modal.js"></script>
<script src="/js/ajax/concesionarios.js"></script>
